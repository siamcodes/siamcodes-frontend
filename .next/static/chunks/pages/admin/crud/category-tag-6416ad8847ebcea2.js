(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{9195:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/category-tag",function(){return t(8332)}])},9049:function(e,r,t){"use strict";t.d(r,{CP:function(){return l},Ue:function(){return a},sT:function(){return u},ui:function(){return i}});var n=t(4301),o=t.n(n),c=t(5844),s=t(1445);let a=(e,r)=>o()("".concat(c.bl,"/category"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e)),l=()=>o()("".concat(c.bl,"/categories"),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),i=e=>o()("".concat(c.bl,"/category/").concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),u=(e,r)=>o()("".concat(c.bl,"/category/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)}}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e))},9242:function(e,r,t){"use strict";t.d(r,{NJ:function(){return l},Ue:function(){return a},tc:function(){return u},xn:function(){return i}});var n=t(4301),o=t.n(n),c=t(5844),s=t(1445);let a=(e,r)=>o()("".concat(c.bl,"/tag"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e)),l=()=>o()("".concat(c.bl,"/tags"),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),i=e=>o()("".concat(c.bl,"/tag/").concat(e),{method:"GET"}).then(e=>e.json()).catch(e=>console.log(e)),u=(e,r)=>o()("".concat(c.bl,"/tag/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)}}).then(e=>((0,s._y)(e),e.json())).catch(e=>console.log(e))},5548:function(e,r,t){"use strict";var n=t(5893),o=t(7294),c=t(1163),s=t.n(c),a=t(1445);let l=e=>{let{children:r}=e;return(0,o.useEffect)(()=>{(0,a.$D)()?1!==(0,a.$D)().role&&s().push("/"):s().push("/signin")},[]),(0,n.jsx)(o.Fragment,{children:r})};r.Z=l},8332:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var n=t(5893),o=t(9282),c=t(5548),s=t(7294);t(1664),t(1163);var a=t(1445),l=t(9049);let i=()=>{let[e,r]=(0,s.useState)({name:"",error:!1,success:!1,categories:[],removed:!1,reload:!1}),{name:t,error:o,success:c,categories:i,removed:u,reload:d}=e,m=(0,a.ej)("token");(0,s.useEffect)(()=>{h()},[d]);let h=()=>{(0,l.CP)().then(t=>{t.error?console.log(t.error):r({...e,categories:t})})},g=e=>{window.confirm("Are you sure you want to delete this category?")&&j(e)},j=t=>{console.log("delete",t),(0,l.sT)(t,m).then(t=>{t.error?console.log(t.error):r({...e,error:!1,success:!1,name:"",removed:!u,reload:!d})})},p=n=>{n.preventDefault(),console.log("create category: ",t),(0,l.Ue)({name:t},m).then(t=>{t.error?r({...e,error:t.error,success:!1}):r({...e,error:!1,success:!0,name:"",removed:!u,reload:!d})})},x=t=>{r({...e,name:t.target.value,error:!1,success:!1,removed:""})},f=t=>{r({...e,error:!1,success:!1,removed:""})};return(0,n.jsxs)(s.Fragment,{children:[(()=>{if(c)return(0,n.jsx)("p",{className:"text-success",children:"Category is created"})})(),(()=>{if(o)return(0,n.jsx)("p",{className:"text-danger",children:"Category already exist"})})(),(()=>{if(u)return(0,n.jsx)("p",{className:"text-danger",children:"Category is removed"})})(),(0,n.jsxs)("div",{onMouseMove:f,children:[(0,n.jsxs)("form",{onSubmit:p,children:[(0,n.jsx)("div",{children:(0,n.jsx)("label",{className:"form-label",children:"Category Name"})}),(0,n.jsxs)("div",{className:"mb-2 input-group",children:[(0,n.jsx)("input",{type:"text",className:"form-control",onChange:x,value:t,required:!0}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:" Create "})]})]}),i.map((e,r)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onDoubleClick:()=>g(e.slug),title:"Double click to delete",className:"btn btn-secondary mr-1 ml-1 mt-3",children:e.name},r)," "]}))]})]})};var u=t(9242);let d=()=>{let[e,r]=(0,s.useState)({name:"",error:!1,success:!1,tags:[],removed:!1,reload:!1}),{name:t,error:o,success:c,tags:l,removed:i,reload:d}=e,m=(0,a.ej)("token");(0,s.useEffect)(()=>{h()},[d]);let h=()=>{(0,u.NJ)().then(t=>{t.error?console.log(t.error):r({...e,tags:t})})},g=e=>{window.confirm("Are you sure you want to delete this tag?")&&j(e)},j=t=>{(0,u.tc)(t,m).then(t=>{t.error?console.log(t.error):r({...e,error:!1,success:!1,name:"",removed:!i,reload:!d})})},p=n=>{n.preventDefault(),(0,u.Ue)({name:t},m).then(t=>{t.error?r({...e,error:t.error,success:!1}):r({...e,error:!1,success:!1,name:"",removed:!i,reload:!d})})},x=t=>{r({...e,name:t.target.value,error:!1,success:!1,removed:""})},f=t=>{r({...e,error:!1,success:!1,removed:""})};return(0,n.jsxs)(s.Fragment,{children:[(()=>{if(c)return(0,n.jsx)("p",{className:"text-success",children:"Tag is created"})})(),(()=>{if(o)return(0,n.jsx)("p",{className:"text-danger",children:"Tag already exist"})})(),(()=>{if(i)return(0,n.jsx)("p",{className:"text-danger",children:"Tag is removed"})})(),(0,n.jsxs)("div",{onMouseMove:f,children:[(0,n.jsxs)("form",{onSubmit:p,children:[(0,n.jsx)("div",{children:(0,n.jsx)("label",{className:"form-label",children:"Tag Name"})}),(0,n.jsxs)("div",{className:"mb-2 input-group",children:[(0,n.jsx)("input",{type:"text",className:"form-control",onChange:x,value:t,required:!0}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})]})]}),l.map((e,r)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onDoubleClick:()=>g(e.slug),title:"Double click to delete",className:"btn btn-outline-secondary mr-1 ml-1 mt-3",children:e.name},r)," "," "]}))]})]})},m=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-12 pt-3 pb-3",children:(0,n.jsx)("h2",{children:"Manage Categories and Tags"})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsx)(i,{})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsx)(d,{})})]})})})});var h=m}},function(e){e.O(0,[849,978,282,774,888,179],function(){return e(e.s=9195)}),_N_E=e.O()}]);